<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602051 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="845"/>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000; margin-top: 14px;">一、配置druid监控页面</h1>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">第一步：导入依赖</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">在pom.xml文件里面添加所需依赖，整个文件如下：</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">project</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xmlns</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xmlns:xsi</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
         <span style="color: #9cdcfe; line-height: 160%; box-sizing: content-box;">xsi:schemaLocation</span>=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">modelVersion</span>&gt;</span>4.0.0<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">modelVersion</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">parent</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-parent<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>2.4.1<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">relativePath</span>/&gt;</span> <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- lookup parent from repository --&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">parent</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>com.psbc<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>zcy<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>0.0.1-SNAPSHOT<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">name</span>&gt;</span>zcy<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">name</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">description</span>&gt;</span>Demo project for Spring Boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">description</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">properties</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">java.version</span>&gt;</span>1.8<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">java.version</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">properties</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 德鲁伊数据源 --&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>com.alibaba<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>druid-spring-boot-starter<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>1.1.13<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- end --&gt;</span>

        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!--&lt;使用注解添加检验规则所需依赖start&gt;--&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.hibernate.validator<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>hibernate-validator<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>6.0.1.Final<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.glassfish<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>javax.el<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>3.0.1-b08<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!--&lt;end&gt;--&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-web<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.projectlombok<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>lombok<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">optional</span>&gt;</span>true<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">optional</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.mybatis.spring.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>2.1.2<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.postgresql<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>postgresql<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 引入log4j2依赖 --&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-log4j2<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- 排除自带的Logback日志工具依赖，为了项目使用Log4j2日志打印工具 --&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">exclusions</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">exclusion</span>&gt;</span>
                    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
                    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-logging<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">exclusion</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">exclusions</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-test<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>test<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">exclusions</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">exclusion</span>&gt;</span>
                    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.junit.vintage<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
                    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>junit-vintage-engine<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">exclusion</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">exclusions</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>junit<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>junit<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>4.12<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>test<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>com.github.pagehelper<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>1.2.3<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.apache.commons<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>commons-lang3<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>3.4<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.junit.platform<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>junit-platform-commons<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>1.6.2<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">version</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>compile<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">scope</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependencies</span>&gt;</span>

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">build</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugins</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugin</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
                <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-maven-plugin<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugin</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">plugins</span>&gt;</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">build</span>&gt;</span>

<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">project</span>&gt;</span>
</code></pre>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">第二步：数据源配置</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">在application.properties配置文件里添加druid的配置。<br/>
spring.datasource.druid.validation-query=SELECT 1 FROM zcy_teacher，其中zcy_teacher为数据库里面的表名。</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">server</span>.port=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">8443</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">#数据源</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">type</span>=com.alibaba.druid.pool.<span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">DruidDataSource</span></span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">#连接PG数据库</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">#spring.datasource.url=jdbc:postgresql://localhost:5432/postgres</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">#spring.datasource.username=postgres</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">#spring.datasource.password=123456</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">#spring.datasource.driver-class-name=org.postgresql.Driver</span>

<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">##JDBC配置</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.url=jdbc:postgresql://localhost:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">5432</span>/postgres
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.username=postgres
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.password=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">123456</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.driverClassName=org.postgresql.<span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">Driver</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">##连接池配置</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 初始化时建立物理连接的个数</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.initial-size=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">5</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 最大连接池数量</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.max-active=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">30</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 最小连接池数量</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.min-idle=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">5</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 获取连接时最大等待时间，单位毫秒</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.max-wait=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">60000</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.time-between-eviction-runs-millis=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">60000</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 连接保持空闲而不被驱逐的最小时间</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.min-evictable-idle-time-millis=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">300000</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.max-evictable-idle-time-millis=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">60000</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 用来检测连接是否有效的sql，要求是一个查询语句</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.validation-query=<span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">SELECT</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span> <span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">FROM</span> zcy_teacher
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 建议配置为true，不影响性能，并且保证安全性。申请连接的时候检测，如果空闲时间大于timeBetweenEvictionRunsMillis，执行validationQuery检测连接是否有效。</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.test-while-idle=true
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 申请连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能。</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.test-on-borrow=false
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 归还连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能。</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.test-on-return=false
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 是否缓存preparedStatement，也就是PSCache。PSCache对支持游标的数据库性能提升巨大，比如说oracle。在mysql下建议关闭。</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.pool-prepared-statements=true
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 要启用PSCache，必须配置大于0，当大于0时，poolPreparedStatements自动触发修改为true。</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.max-pool-prepared-statement-per-connection-size=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">50</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 配置监控统计拦截的filters，去掉后监控界面sql无法统计</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.filters=stat,wall
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 通过connectProperties属性来打开mergeSql功能；慢SQL记录</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.connectionProperties=druid.stat.mergeSql=true;druid.stat.slowSqlMillis=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">500</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 合并多个DruidDataSource的监控数据</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.use-global-<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">data</span>-source-stat=true</span>

<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># druid连接池监控</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.stat-view-servlet.enabled=true
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.stat-view-servlet.url-pattern=/druid/*
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.stat-view-servlet.login-username=admin
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.stat-view-servlet.login-password=<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">123</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;"># 排除一些静态资源，以提高效率</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">spring</span>.datasource.druid.web-stat-filter.exclusions=*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*

<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">#spring.datasource.druid.validation-query-timeout=20000</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">## StatViewServlet配置。（因为暴露的监控信息比较敏感，支持密码加密和访问ip限定）</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">#spring.datasource.druid.filter.stat.log-slow-sql=true</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">#spring.datasource.druid.filter.stat.slow-sql-millis=1000</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">#spring.datasource.druid.filter.stat.merge-sql=true</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">#spring.datasource.druid.filter.wall.config.multi-statement-allow=true</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">#mybatis</span>
<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">mybatis</span>.mapper-locations=classpath:/mapper/**/*<span style="color: #4ec9b0; line-height: 160%; box-sizing: content-box;">Mapper</span>.xml
</code></pre>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">第三步：Druid数据库连接池配置文件和配置 Druid 监控界面</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">在demo下新建config包后在包下新建类DruidConfig:</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">package</span> com.psbc.zcy.demo.config;

<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> com.alibaba.druid.pool.DruidDataSource;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> com.alibaba.druid.spring.boot.autoconfigure.properties.DruidStatProperties;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> com.alibaba.druid.support.http.StatViewServlet;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> com.alibaba.druid.support.http.WebStatFilter;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.slf4j.Logger;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.slf4j.LoggerFactory;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.beans.factory.annotation.Autowired;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.beans.factory.annotation.Value;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.boot.web.servlet.FilterRegistrationBean;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.boot.web.servlet.ServletRegistrationBean;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.context.annotation.Bean;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.context.annotation.Configuration;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> org.springframework.jdbc.core.JdbcTemplate;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> java.io.IOException;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> javax.servlet.Filter;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> javax.servlet.FilterChain;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> javax.servlet.ServletException;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> javax.servlet.ServletRequest;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> javax.servlet.ServletResponse;
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> com.alibaba.druid.util.Utils;

<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/**
 * Druid数据库连接池配置文件
 */</span>
<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Configuration</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">class</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">DruidConfig</span> </span>{
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">static</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">final</span> Logger logger = LoggerFactory.getLogger(DruidConfig.class);

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.url}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> String dbUrl;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.username}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> String username;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.password}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> String password;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.driverClassName}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> String driverClassName;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.initial-size}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> initialSize;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.max-active}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> maxActive;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.min-idle}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> minIdle;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.max-wait}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> maxWait;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.pool-prepared-statements}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">boolean</span> poolPreparedStatements;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.max-pool-prepared-statement-per-connection-size}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> maxPoolPreparedStatementPerConnectionSize;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.time-between-eviction-runs-millis}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> timeBetweenEvictionRunsMillis;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.min-evictable-idle-time-millis}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> minEvictableIdleTimeMillis;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.max-evictable-idle-time-millis}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">int</span> maxEvictableIdleTimeMillis;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.validation-query}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> String validationQuery;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.test-while-idle}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">boolean</span> testWhileIdle;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.test-on-borrow}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">boolean</span> testOnBorrow;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.test-on-return}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">boolean</span> testOnReturn;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;${spring.datasource.druid.filters}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> String filters;

    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Value</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;{spring.datasource.druid.connection-properties}&quot;</span>)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">private</span> String connectionProperties;

    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/**
     * Druid 连接池配置
     */</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Bean</span>     <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//声明其为Bean实例</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> DruidDataSource <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">dataSource</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span> </span>{
        DruidDataSource datasource = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> DruidDataSource();
        datasource.setUrl(dbUrl);
        datasource.setUsername(username);
        datasource.setPassword(password);
        datasource.setDriverClassName(driverClassName);
        datasource.setInitialSize(initialSize);
        datasource.setMinIdle(minIdle);
        datasource.setMaxActive(maxActive);
        datasource.setMaxWait(maxWait);
        datasource.setTimeBetweenEvictionRunsMillis(timeBetweenEvictionRunsMillis);
        datasource.setMinEvictableIdleTimeMillis(minEvictableIdleTimeMillis);
        datasource.setMaxEvictableIdleTimeMillis(minEvictableIdleTimeMillis);
        datasource.setValidationQuery(validationQuery);
        datasource.setTestWhileIdle(testWhileIdle);
        datasource.setTestOnBorrow(testOnBorrow);
        datasource.setTestOnReturn(testOnReturn);
        datasource.setPoolPreparedStatements(poolPreparedStatements);
        datasource.setMaxPoolPreparedStatementPerConnectionSize(maxPoolPreparedStatementPerConnectionSize);
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">try</span> {
            datasource.setFilters(filters);
        } <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">catch</span> (Exception e) {
            logger.error(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;druid configuration initialization filter&quot;</span>, e);
        }
        datasource.setConnectionProperties(connectionProperties);
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> datasource;
    }

    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/**
     * 去除监控页面底部的广告
     */</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@SuppressWarnings</span>({ <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;rawtypes&quot;</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;unchecked&quot;</span> })
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Bean</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@ConditionalOnProperty</span>(name = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;spring.datasource.druid.statViewServlet.enabled&quot;</span>, havingValue = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;true&quot;</span>)
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> FilterRegistrationBean <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">removeDruidFilterRegistrationBean</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(DruidStatProperties properties)</span>
    </span>{
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// 获取web监控页面的参数</span>
        DruidStatProperties.StatViewServlet config = properties.getStatViewServlet();
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// 提取common.js的配置路径</span>
        String pattern = config.getUrlPattern() != <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">null</span> ? config.getUrlPattern() : <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/druid/*&quot;</span>;
        String commonJsPattern = pattern.replaceAll(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;\\*&quot;</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;js/common.js&quot;</span>);
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">final</span> String filePath = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;support/http/resources/js/common.js&quot;</span>;
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// 创建filter进行过滤</span>
        Filter filter = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> Filter()
        {
            <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">init</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(javax.servlet.FilterConfig filterConfig)</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> ServletException
            </span>{
            }
            <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">doFilter</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(ServletRequest request, ServletResponse response, FilterChain chain)</span>
                    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">throws</span> IOException, ServletException
            </span>{
                chain.doFilter(request, response);
                <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// 重置缓冲区，响应头不会被重置</span>
                response.resetBuffer();
                <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// 获取common.js</span>
                String text = Utils.readFromResource(filePath);
                <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// 正则替换banner, 除去底部的广告信息</span>
                text = text.replaceAll(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;&lt;a.*?banner\&quot;&gt;&lt;/a&gt;&lt;br/&gt;&quot;</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;&quot;</span>);
                text = text.replaceAll(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;powered.*?shrek.wang&lt;/a&gt;&quot;</span>, <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;&quot;</span>);
                response.getWriter().write(text);
            }

            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Override</span>
            <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">void</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">destroy</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span>
            </span>{
            }
        };
        FilterRegistrationBean registrationBean = <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> FilterRegistrationBean();
        registrationBean.setFilter(filter);
        registrationBean.addUrlPatterns(commonJsPattern);
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> registrationBean;
    }

    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/**
     * JDBC操作配置
     */</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Bean</span>(name = <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;dataOneTemplate&quot;</span>)
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> JdbcTemplate <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">jdbcTemplate</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(@Autowired DruidDataSource dataSource)</span></span>{
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> JdbcTemplate(dataSource) ;
    }

    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">/**
     * 配置 Druid 监控界面
     */</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Bean</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> ServletRegistrationBean <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">statViewServlet</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span></span>{
        ServletRegistrationBean srb =
                <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> ServletRegistrationBean(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> StatViewServlet(),<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/druid/*&quot;</span>);
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//设置控制台管理用户</span>
        srb.addInitParameter(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;loginUsername&quot;</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;root&quot;</span>);
        srb.addInitParameter(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;loginPassword&quot;</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;root&quot;</span>);
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//是否可以重置数据</span>
        srb.addInitParameter(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;resetEnable&quot;</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;false&quot;</span>);
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> srb;
    }
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@Bean</span>
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> FilterRegistrationBean <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">statFilter</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span></span>{
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//创建过滤器</span>
        FilterRegistrationBean frb =
                <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> FilterRegistrationBean(<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">new</span> WebStatFilter());
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//设置过滤器过滤路径</span>
        frb.addUrlPatterns(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/*&quot;</span>);
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//忽略过滤的形式</span>
        frb.addInitParameter(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;exclusions&quot;</span>,
                <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&quot;</span>);
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> frb;
    }
}
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">提供一下我的代码结构<br/>
<img src="配置druid监控页面+Spring 监控+获取 Druid 的监控数据_files/Image.png" type="image/png" data-filename="Image.png"/><br/>
到此，配置已经完成了接下来查看页面，访问http://localhost:8443/druid/login，登录账号密码在代码里面写死的：username:rootpassword:root<br/>
<img src="配置druid监控页面+Spring 监控+获取 Druid 的监控数据_files/Image [1].png" type="image/png" data-filename="Image.png"/><br/>
<img src="配置druid监控页面+Spring 监控+获取 Druid 的监控数据_files/Image [2].png" type="image/png" data-filename="Image.png"/><br/>
<img src="配置druid监控页面+Spring 监控+获取 Druid 的监控数据_files/Image [3].png" type="image/png" data-filename="Image.png"/></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><a href="https://blog.csdn.net/qq_41950855/article/details/109578507" style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">参考文献1</a></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><a href="https://blog.csdn.net/gnail_oug/article/details/80172239" style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">参考文献2</a></p>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">二、Spring 监控</h1>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">默认情况下监控控制台中“Spring监控”子页面内容是空的，我们可以通过类似如下的配置，利用 aop 对各个内容接口的执行时间、jdbc 数进行记录。<a href="https://www.hangge.com/blog/cache/detail_2876.html" style="line-height: 160%; box-sizing: content-box; text-decoration: underline; color: #5286bc;">原文</a></p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">1. Spring 监控配置</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">在application. properties中添加如下配置</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"># Spring 监控配置（配置多个AOP切入点使用英文逗号分隔）
spring.datasource.druid.aop-patterns=com.psbc.zcy.demo.dao.*
</code></pre>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">2.修改 pom.xml 文件</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">同时记得修改 pom.xml 文件，添加 spring-boot-starter-aop 依赖以提供 AOP 支持：</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- spring监控所用依赖添加 spring-boot-starter-aop 依赖以提供 AOP 支持start --&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>org.springframework.boot<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">groupId</span>&gt;</span>
            <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>spring-boot-starter-aop<span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">artifactId</span>&gt;</span>
        <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">&lt;/<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">dependency</span>&gt;</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">&lt;!-- end --&gt;</span>
</code></pre>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">3.启动项目</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">启动项目后我们随便请求几个 contoller 接口，然后访问“Spring监控”即可查看方法执行的次数、执行的时间等信息。<br/>
<img src="配置druid监控页面+Spring 监控+获取 Druid 的监控数据_files/Image [4].png" type="image/png" data-filename="Image.png"/></p>
<h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000;">三、获取 Druid 的监控数据</h1>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">Druid 的监控数据可以在开启 StatFilter 后通过 DruidStatManagerFacade 进行获取，获取到监控数据之后我们便可以将其暴露给我们自己的监控系统进行使用。Druid 默认的监控系统数据也来源于此。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">（1）下面是一个简单的演示样例，在 Spring Boot 中通过 HTTP 接口将 Druid 监控数据以 JSON 的形式暴露出去（实际使用中我们可以根据实际的需要自由地对监控数据、暴露方式进行扩展）。在TeacherController中添加如下接口。</p>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">//获取 Druid 的监控数据</span>
    <span style="color: #9b9b9b; line-height: 160%; box-sizing: content-box;">@GetMapping</span>(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;/api/druid-stat&quot;</span>)
    <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">public</span> Object <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">druidStat</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">()</span></span>{
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// DruidStatManagerFacade#getDataSourceStatDataList 该方法可以获取所有数据源的监控数据</span>
        <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">// 除此之外 DruidStatManagerFacade 还提供了一些其他方法，我们可以按需选择使用。</span>
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">return</span> DruidStatManagerFacade.getInstance().getDataSourceStatDataList();
    }
</code></pre>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">（2）我们通过api /druid-stat 接口获取到如下统计数据：（在获取数据前需要执行一次数据库的操作如/api/teacher/list，这样才会能获取到数据源的信息，不然返回值为[]）<br/>
<img src="配置druid监控页面+Spring 监控+获取 Druid 的监控数据_files/Image [5].png" type="image/png" data-filename="Image.png"/></p>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%20%E4%B8%80%E3%80%81%E9%85%8D%E7%BD%AEdruid%E7%9B%91%E6%8E%A7%E9%A1%B5%E9%9D%A2%0A%23%23%20%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96%20%0A%E5%9C%A8pom.xml%E6%96%87%E4%BB%B6%E9%87%8C%E9%9D%A2%E6%B7%BB%E5%8A%A0%E6%89%80%E9%9C%80%E4%BE%9D%E8%B5%96%EF%BC%8C%E6%95%B4%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A6%82%E4%B8%8B%EF%BC%9A%0A%60%60%60html%0A%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0A%3Cproject%20xmlns%3D%22http%3A%2F%2Fmaven.apache.org%2FPOM%2F4.0.0%22%20xmlns%3Axsi%3D%22http%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema-instance%22%0A%20%20%20%20%20%20%20%20%20xsi%3AschemaLocation%3D%22http%3A%2F%2Fmaven.apache.org%2FPOM%2F4.0.0%20https%3A%2F%2Fmaven.apache.org%2Fxsd%2Fmaven-4.0.0.xsd%22%3E%0A%20%20%20%20%3CmodelVersion%3E4.0.0%3C%2FmodelVersion%3E%0A%20%20%20%20%3Cparent%3E%0A%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-parent%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3Cversion%3E2.4.1%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%3CrelativePath%2F%3E%20%3C!--%20lookup%20parent%20from%20repository%20--%3E%0A%20%20%20%20%3C%2Fparent%3E%0A%20%20%20%20%3CgroupId%3Ecom.psbc%3C%2FgroupId%3E%0A%20%20%20%20%3CartifactId%3Ezcy%3C%2FartifactId%3E%0A%20%20%20%20%3Cversion%3E0.0.1-SNAPSHOT%3C%2Fversion%3E%0A%20%20%20%20%3Cname%3Ezcy%3C%2Fname%3E%0A%20%20%20%20%3Cdescription%3EDemo%20project%20for%20Spring%20Boot%3C%2Fdescription%3E%0A%0A%20%20%20%20%3Cproperties%3E%0A%20%20%20%20%20%20%20%20%3Cjava.version%3E1.8%3C%2Fjava.version%3E%0A%20%20%20%20%3C%2Fproperties%3E%0A%0A%20%20%20%20%3Cdependencies%3E%0A%20%20%20%20%20%20%20%20%3C!--%20%E5%BE%B7%E9%B2%81%E4%BC%8A%E6%95%B0%E6%8D%AE%E6%BA%90%20--%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Ecom.alibaba%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Edruid-spring-boot-starter%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E1.1.13%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3C!--%20end%20--%3E%0A%0A%20%20%20%20%20%20%20%20%3C!--%3C%E4%BD%BF%E7%94%A8%E6%B3%A8%E8%A7%A3%E6%B7%BB%E5%8A%A0%E6%A3%80%E9%AA%8C%E8%A7%84%E5%88%99%E6%89%80%E9%9C%80%E4%BE%9D%E8%B5%96start%3E--%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.hibernate.validator%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Ehibernate-validator%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E6.0.1.Final%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.glassfish%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Ejavax.el%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E3.0.1-b08%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3C!--%3Cend%3E--%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-web%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.projectlombok%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Elombok%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Coptional%3Etrue%3C%2Foptional%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.mybatis.spring.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Emybatis-spring-boot-starter%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E2.1.2%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.postgresql%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Epostgresql%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3C!--%20%E5%BC%95%E5%85%A5log4j2%E4%BE%9D%E8%B5%96%20--%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-log4j2%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C!--%20%E6%8E%92%E9%99%A4%E8%87%AA%E5%B8%A6%E7%9A%84Logback%E6%97%A5%E5%BF%97%E5%B7%A5%E5%85%B7%E4%BE%9D%E8%B5%96%EF%BC%8C%E4%B8%BA%E4%BA%86%E9%A1%B9%E7%9B%AE%E4%BD%BF%E7%94%A8Log4j2%E6%97%A5%E5%BF%97%E6%89%93%E5%8D%B0%E5%B7%A5%E5%85%B7%20--%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cexclusions%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cexclusion%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-logging%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fexclusion%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fexclusions%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-test%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cscope%3Etest%3C%2Fscope%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cexclusions%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cexclusion%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.junit.vintage%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Ejunit-vintage-engine%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fexclusion%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fexclusions%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Ejunit%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Ejunit%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E4.12%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cscope%3Etest%3C%2Fscope%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Ecom.github.pagehelper%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Epagehelper-spring-boot-starter%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E1.2.3%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.apache.commons%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Ecommons-lang3%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E3.4%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.junit.platform%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Ejunit-platform-commons%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cversion%3E1.6.2%3C%2Fversion%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cscope%3Ecompile%3C%2Fscope%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%3C%2Fdependencies%3E%0A%0A%20%20%20%20%3Cbuild%3E%0A%20%20%20%20%20%20%20%20%3Cplugins%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cplugin%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-maven-plugin%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C%2Fplugin%3E%0A%20%20%20%20%20%20%20%20%3C%2Fplugins%3E%0A%20%20%20%20%3C%2Fbuild%3E%0A%0A%3C%2Fproject%3E%0A%60%60%60%0A%23%23%20%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E9%85%8D%E7%BD%AE%0A%0A%E5%9C%A8application.properties%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8C%E6%B7%BB%E5%8A%A0druid%E7%9A%84%E9%85%8D%E7%BD%AE%E3%80%82%0Aspring.datasource.druid.validation-query%3DSELECT%201%20FROM%20zcy_teacher%EF%BC%8C%E5%85%B6%E4%B8%ADzcy_teacher%E4%B8%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E9%87%8C%E9%9D%A2%E7%9A%84%E8%A1%A8%E5%90%8D%E3%80%82%0A%0A%60%60%60Haskell%0Aserver.port%3D8443%0A%23%E6%95%B0%E6%8D%AE%E6%BA%90%0Aspring.datasource.type%3Dcom.alibaba.druid.pool.DruidDataSource%0A%23%E8%BF%9E%E6%8E%A5PG%E6%95%B0%E6%8D%AE%E5%BA%93%0A%23spring.datasource.url%3Djdbc%3Apostgresql%3A%2F%2Flocalhost%3A5432%2Fpostgres%0A%23spring.datasource.username%3Dpostgres%0A%23spring.datasource.password%3D123456%0A%23spring.datasource.driver-class-name%3Dorg.postgresql.Driver%0A%0A%23%23JDBC%E9%85%8D%E7%BD%AE%0Aspring.datasource.druid.url%3Djdbc%3Apostgresql%3A%2F%2Flocalhost%3A5432%2Fpostgres%0Aspring.datasource.druid.username%3Dpostgres%0Aspring.datasource.druid.password%3D123456%0Aspring.datasource.druid.driverClassName%3Dorg.postgresql.Driver%0A%23%23%E8%BF%9E%E6%8E%A5%E6%B1%A0%E9%85%8D%E7%BD%AE%0A%23%20%E5%88%9D%E5%A7%8B%E5%8C%96%E6%97%B6%E5%BB%BA%E7%AB%8B%E7%89%A9%E7%90%86%E8%BF%9E%E6%8E%A5%E7%9A%84%E4%B8%AA%E6%95%B0%0Aspring.datasource.druid.initial-size%3D5%0A%23%20%E6%9C%80%E5%A4%A7%E8%BF%9E%E6%8E%A5%E6%B1%A0%E6%95%B0%E9%87%8F%0Aspring.datasource.druid.max-active%3D30%0A%23%20%E6%9C%80%E5%B0%8F%E8%BF%9E%E6%8E%A5%E6%B1%A0%E6%95%B0%E9%87%8F%0Aspring.datasource.druid.min-idle%3D5%0A%23%20%E8%8E%B7%E5%8F%96%E8%BF%9E%E6%8E%A5%E6%97%B6%E6%9C%80%E5%A4%A7%E7%AD%89%E5%BE%85%E6%97%B6%E9%97%B4%EF%BC%8C%E5%8D%95%E4%BD%8D%E6%AF%AB%E7%A7%92%0Aspring.datasource.druid.max-wait%3D60000%0A%23%20%E9%85%8D%E7%BD%AE%E9%97%B4%E9%9A%94%E5%A4%9A%E4%B9%85%E6%89%8D%E8%BF%9B%E8%A1%8C%E4%B8%80%E6%AC%A1%E6%A3%80%E6%B5%8B%EF%BC%8C%E6%A3%80%E6%B5%8B%E9%9C%80%E8%A6%81%E5%85%B3%E9%97%AD%E7%9A%84%E7%A9%BA%E9%97%B2%E8%BF%9E%E6%8E%A5%EF%BC%8C%E5%8D%95%E4%BD%8D%E6%98%AF%E6%AF%AB%E7%A7%92%0Aspring.datasource.druid.time-between-eviction-runs-millis%3D60000%0A%23%20%E8%BF%9E%E6%8E%A5%E4%BF%9D%E6%8C%81%E7%A9%BA%E9%97%B2%E8%80%8C%E4%B8%8D%E8%A2%AB%E9%A9%B1%E9%80%90%E7%9A%84%E6%9C%80%E5%B0%8F%E6%97%B6%E9%97%B4%0Aspring.datasource.druid.min-evictable-idle-time-millis%3D300000%0Aspring.datasource.druid.max-evictable-idle-time-millis%3D60000%0A%23%20%E7%94%A8%E6%9D%A5%E6%A3%80%E6%B5%8B%E8%BF%9E%E6%8E%A5%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%88%E7%9A%84sql%EF%BC%8C%E8%A6%81%E6%B1%82%E6%98%AF%E4%B8%80%E4%B8%AA%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%0Aspring.datasource.druid.validation-query%3DSELECT%201%20FROM%20zcy_teacher%0A%23%20%E5%BB%BA%E8%AE%AE%E9%85%8D%E7%BD%AE%E4%B8%BAtrue%EF%BC%8C%E4%B8%8D%E5%BD%B1%E5%93%8D%E6%80%A7%E8%83%BD%EF%BC%8C%E5%B9%B6%E4%B8%94%E4%BF%9D%E8%AF%81%E5%AE%89%E5%85%A8%E6%80%A7%E3%80%82%E7%94%B3%E8%AF%B7%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%97%B6%E5%80%99%E6%A3%80%E6%B5%8B%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%A9%BA%E9%97%B2%E6%97%B6%E9%97%B4%E5%A4%A7%E4%BA%8EtimeBetweenEvictionRunsMillis%EF%BC%8C%E6%89%A7%E8%A1%8CvalidationQuery%E6%A3%80%E6%B5%8B%E8%BF%9E%E6%8E%A5%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%88%E3%80%82%0Aspring.datasource.druid.test-while-idle%3Dtrue%0A%23%20%E7%94%B3%E8%AF%B7%E8%BF%9E%E6%8E%A5%E6%97%B6%E6%89%A7%E8%A1%8CvalidationQuery%E6%A3%80%E6%B5%8B%E8%BF%9E%E6%8E%A5%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%88%EF%BC%8C%E5%81%9A%E4%BA%86%E8%BF%99%E4%B8%AA%E9%85%8D%E7%BD%AE%E4%BC%9A%E9%99%8D%E4%BD%8E%E6%80%A7%E8%83%BD%E3%80%82%0Aspring.datasource.druid.test-on-borrow%3Dfalse%0A%23%20%E5%BD%92%E8%BF%98%E8%BF%9E%E6%8E%A5%E6%97%B6%E6%89%A7%E8%A1%8CvalidationQuery%E6%A3%80%E6%B5%8B%E8%BF%9E%E6%8E%A5%E6%98%AF%E5%90%A6%E6%9C%89%E6%95%88%EF%BC%8C%E5%81%9A%E4%BA%86%E8%BF%99%E4%B8%AA%E9%85%8D%E7%BD%AE%E4%BC%9A%E9%99%8D%E4%BD%8E%E6%80%A7%E8%83%BD%E3%80%82%0Aspring.datasource.druid.test-on-return%3Dfalse%0A%23%20%E6%98%AF%E5%90%A6%E7%BC%93%E5%AD%98preparedStatement%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AFPSCache%E3%80%82PSCache%E5%AF%B9%E6%94%AF%E6%8C%81%E6%B8%B8%E6%A0%87%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E6%80%A7%E8%83%BD%E6%8F%90%E5%8D%87%E5%B7%A8%E5%A4%A7%EF%BC%8C%E6%AF%94%E5%A6%82%E8%AF%B4oracle%E3%80%82%E5%9C%A8mysql%E4%B8%8B%E5%BB%BA%E8%AE%AE%E5%85%B3%E9%97%AD%E3%80%82%0Aspring.datasource.druid.pool-prepared-statements%3Dtrue%0A%23%20%E8%A6%81%E5%90%AF%E7%94%A8PSCache%EF%BC%8C%E5%BF%85%E9%A1%BB%E9%85%8D%E7%BD%AE%E5%A4%A7%E4%BA%8E0%EF%BC%8C%E5%BD%93%E5%A4%A7%E4%BA%8E0%E6%97%B6%EF%BC%8CpoolPreparedStatements%E8%87%AA%E5%8A%A8%E8%A7%A6%E5%8F%91%E4%BF%AE%E6%94%B9%E4%B8%BAtrue%E3%80%82%0Aspring.datasource.druid.max-pool-prepared-statement-per-connection-size%3D50%0A%23%20%E9%85%8D%E7%BD%AE%E7%9B%91%E6%8E%A7%E7%BB%9F%E8%AE%A1%E6%8B%A6%E6%88%AA%E7%9A%84filters%EF%BC%8C%E5%8E%BB%E6%8E%89%E5%90%8E%E7%9B%91%E6%8E%A7%E7%95%8C%E9%9D%A2sql%E6%97%A0%E6%B3%95%E7%BB%9F%E8%AE%A1%0Aspring.datasource.druid.filters%3Dstat%2Cwall%0A%23%20%E9%80%9A%E8%BF%87connectProperties%E5%B1%9E%E6%80%A7%E6%9D%A5%E6%89%93%E5%BC%80mergeSql%E5%8A%9F%E8%83%BD%EF%BC%9B%E6%85%A2SQL%E8%AE%B0%E5%BD%95%0Aspring.datasource.druid.connectionProperties%3Ddruid.stat.mergeSql%3Dtrue%3Bdruid.stat.slowSqlMillis%3D500%0A%23%20%E5%90%88%E5%B9%B6%E5%A4%9A%E4%B8%AADruidDataSource%E7%9A%84%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%0Aspring.datasource.druid.use-global-data-source-stat%3Dtrue%0A%0A%23%20druid%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%9B%91%E6%8E%A7%0Aspring.datasource.druid.stat-view-servlet.enabled%3Dtrue%0Aspring.datasource.druid.stat-view-servlet.url-pattern%3D%2Fdruid%2F*%0Aspring.datasource.druid.stat-view-servlet.login-username%3Dadmin%0Aspring.datasource.druid.stat-view-servlet.login-password%3D123%0A%23%20%E6%8E%92%E9%99%A4%E4%B8%80%E4%BA%9B%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%EF%BC%8C%E4%BB%A5%E6%8F%90%E9%AB%98%E6%95%88%E7%8E%87%0Aspring.datasource.druid.web-stat-filter.exclusions%3D*.js%2C*.gif%2C*.jpg%2C*.png%2C*.css%2C*.ico%2C%2Fdruid%2F*%0A%0A%23spring.datasource.druid.validation-query-timeout%3D20000%0A%23%23%20StatViewServlet%E9%85%8D%E7%BD%AE%E3%80%82%EF%BC%88%E5%9B%A0%E4%B8%BA%E6%9A%B4%E9%9C%B2%E7%9A%84%E7%9B%91%E6%8E%A7%E4%BF%A1%E6%81%AF%E6%AF%94%E8%BE%83%E6%95%8F%E6%84%9F%EF%BC%8C%E6%94%AF%E6%8C%81%E5%AF%86%E7%A0%81%E5%8A%A0%E5%AF%86%E5%92%8C%E8%AE%BF%E9%97%AEip%E9%99%90%E5%AE%9A%EF%BC%89%0A%23spring.datasource.druid.filter.stat.log-slow-sql%3Dtrue%0A%23spring.datasource.druid.filter.stat.slow-sql-millis%3D1000%0A%23spring.datasource.druid.filter.stat.merge-sql%3Dtrue%0A%23spring.datasource.druid.filter.wall.config.multi-statement-allow%3Dtrue%0A%23mybatis%0Amybatis.mapper-locations%3Dclasspath%3A%2Fmapper%2F**%2F*Mapper.xml%0A%60%60%60%0A%23%23%20%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9ADruid%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8C%E9%85%8D%E7%BD%AE%20Druid%20%E7%9B%91%E6%8E%A7%E7%95%8C%E9%9D%A2%0A%E5%9C%A8demo%E4%B8%8B%E6%96%B0%E5%BB%BAconfig%E5%8C%85%E5%90%8E%E5%9C%A8%E5%8C%85%E4%B8%8B%E6%96%B0%E5%BB%BA%E7%B1%BBDruidConfig%3A%0A%60%60%60java%0Apackage%20com.psbc.zcy.demo.config%3B%0A%0Aimport%20com.alibaba.druid.pool.DruidDataSource%3B%0Aimport%20com.alibaba.druid.spring.boot.autoconfigure.properties.DruidStatProperties%3B%0Aimport%20com.alibaba.druid.support.http.StatViewServlet%3B%0Aimport%20com.alibaba.druid.support.http.WebStatFilter%3B%0Aimport%20org.slf4j.Logger%3B%0Aimport%20org.slf4j.LoggerFactory%3B%0Aimport%20org.springframework.beans.factory.annotation.Autowired%3B%0Aimport%20org.springframework.beans.factory.annotation.Value%3B%0Aimport%20org.springframework.boot.autoconfigure.condition.ConditionalOnProperty%3B%0Aimport%20org.springframework.boot.web.servlet.FilterRegistrationBean%3B%0Aimport%20org.springframework.boot.web.servlet.ServletRegistrationBean%3B%0Aimport%20org.springframework.context.annotation.Bean%3B%0Aimport%20org.springframework.context.annotation.Configuration%3B%0Aimport%20org.springframework.jdbc.core.JdbcTemplate%3B%0Aimport%20java.io.IOException%3B%0Aimport%20javax.servlet.Filter%3B%0Aimport%20javax.servlet.FilterChain%3B%0Aimport%20javax.servlet.ServletException%3B%0Aimport%20javax.servlet.ServletRequest%3B%0Aimport%20javax.servlet.ServletResponse%3B%0Aimport%20com.alibaba.druid.util.Utils%3B%0A%0A%2F**%0A%20*%20Druid%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%0A%20*%2F%0A%40Configuration%0Apublic%20class%20DruidConfig%20%7B%0A%20%20%20%20private%20static%20final%20Logger%20logger%20%3D%20LoggerFactory.getLogger(DruidConfig.class)%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.url%7D%22)%0A%20%20%20%20private%20String%20dbUrl%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.username%7D%22)%0A%20%20%20%20private%20String%20username%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.password%7D%22)%0A%20%20%20%20private%20String%20password%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.driverClassName%7D%22)%0A%20%20%20%20private%20String%20driverClassName%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.initial-size%7D%22)%0A%20%20%20%20private%20int%20initialSize%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.max-active%7D%22)%0A%20%20%20%20private%20int%20maxActive%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.min-idle%7D%22)%0A%20%20%20%20private%20int%20minIdle%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.max-wait%7D%22)%0A%20%20%20%20private%20int%20maxWait%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.pool-prepared-statements%7D%22)%0A%20%20%20%20private%20boolean%20poolPreparedStatements%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.max-pool-prepared-statement-per-connection-size%7D%22)%0A%20%20%20%20private%20int%20maxPoolPreparedStatementPerConnectionSize%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.time-between-eviction-runs-millis%7D%22)%0A%20%20%20%20private%20int%20timeBetweenEvictionRunsMillis%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.min-evictable-idle-time-millis%7D%22)%0A%20%20%20%20private%20int%20minEvictableIdleTimeMillis%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.max-evictable-idle-time-millis%7D%22)%0A%20%20%20%20private%20int%20maxEvictableIdleTimeMillis%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.validation-query%7D%22)%0A%20%20%20%20private%20String%20validationQuery%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.test-while-idle%7D%22)%0A%20%20%20%20private%20boolean%20testWhileIdle%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.test-on-borrow%7D%22)%0A%20%20%20%20private%20boolean%20testOnBorrow%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.test-on-return%7D%22)%0A%20%20%20%20private%20boolean%20testOnReturn%3B%0A%0A%20%20%20%20%40Value(%22%24%7Bspring.datasource.druid.filters%7D%22)%0A%20%20%20%20private%20String%20filters%3B%0A%0A%20%20%20%20%40Value(%22%7Bspring.datasource.druid.connection-properties%7D%22)%0A%20%20%20%20private%20String%20connectionProperties%3B%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20Druid%20%E8%BF%9E%E6%8E%A5%E6%B1%A0%E9%85%8D%E7%BD%AE%0A%20%20%20%20%20*%2F%0A%20%20%20%20%40Bean%20%20%20%20%20%2F%2F%E5%A3%B0%E6%98%8E%E5%85%B6%E4%B8%BABean%E5%AE%9E%E4%BE%8B%0A%20%20%20%20public%20DruidDataSource%20dataSource()%20%7B%0A%20%20%20%20%20%20%20%20DruidDataSource%20datasource%20%3D%20new%20DruidDataSource()%3B%0A%20%20%20%20%20%20%20%20datasource.setUrl(dbUrl)%3B%0A%20%20%20%20%20%20%20%20datasource.setUsername(username)%3B%0A%20%20%20%20%20%20%20%20datasource.setPassword(password)%3B%0A%20%20%20%20%20%20%20%20datasource.setDriverClassName(driverClassName)%3B%0A%20%20%20%20%20%20%20%20datasource.setInitialSize(initialSize)%3B%0A%20%20%20%20%20%20%20%20datasource.setMinIdle(minIdle)%3B%0A%20%20%20%20%20%20%20%20datasource.setMaxActive(maxActive)%3B%0A%20%20%20%20%20%20%20%20datasource.setMaxWait(maxWait)%3B%0A%20%20%20%20%20%20%20%20datasource.setTimeBetweenEvictionRunsMillis(timeBetweenEvictionRunsMillis)%3B%0A%20%20%20%20%20%20%20%20datasource.setMinEvictableIdleTimeMillis(minEvictableIdleTimeMillis)%3B%0A%20%20%20%20%20%20%20%20datasource.setMaxEvictableIdleTimeMillis(minEvictableIdleTimeMillis)%3B%0A%20%20%20%20%20%20%20%20datasource.setValidationQuery(validationQuery)%3B%0A%20%20%20%20%20%20%20%20datasource.setTestWhileIdle(testWhileIdle)%3B%0A%20%20%20%20%20%20%20%20datasource.setTestOnBorrow(testOnBorrow)%3B%0A%20%20%20%20%20%20%20%20datasource.setTestOnReturn(testOnReturn)%3B%0A%20%20%20%20%20%20%20%20datasource.setPoolPreparedStatements(poolPreparedStatements)%3B%0A%20%20%20%20%20%20%20%20datasource.setMaxPoolPreparedStatementPerConnectionSize(maxPoolPreparedStatementPerConnectionSize)%3B%0A%20%20%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20datasource.setFilters(filters)%3B%0A%20%20%20%20%20%20%20%20%7D%20catch%20(Exception%20e)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20logger.error(%22druid%20configuration%20initialization%20filter%22%2C%20e)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20datasource.setConnectionProperties(connectionProperties)%3B%0A%20%20%20%20%20%20%20%20return%20datasource%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%E5%8E%BB%E9%99%A4%E7%9B%91%E6%8E%A7%E9%A1%B5%E9%9D%A2%E5%BA%95%E9%83%A8%E7%9A%84%E5%B9%BF%E5%91%8A%0A%20%20%20%20%20*%2F%0A%20%20%20%20%40SuppressWarnings(%7B%20%22rawtypes%22%2C%20%22unchecked%22%20%7D)%0A%20%20%20%20%40Bean%0A%20%20%20%20%40ConditionalOnProperty(name%20%3D%20%22spring.datasource.druid.statViewServlet.enabled%22%2C%20havingValue%20%3D%20%22true%22)%0A%20%20%20%20public%20FilterRegistrationBean%20removeDruidFilterRegistrationBean(DruidStatProperties%20properties)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20%E8%8E%B7%E5%8F%96web%E7%9B%91%E6%8E%A7%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%8F%82%E6%95%B0%0A%20%20%20%20%20%20%20%20DruidStatProperties.StatViewServlet%20config%20%3D%20properties.getStatViewServlet()%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20%E6%8F%90%E5%8F%96common.js%E7%9A%84%E9%85%8D%E7%BD%AE%E8%B7%AF%E5%BE%84%0A%20%20%20%20%20%20%20%20String%20pattern%20%3D%20config.getUrlPattern()%20!%3D%20null%20%3F%20config.getUrlPattern()%20%3A%20%22%2Fdruid%2F*%22%3B%0A%20%20%20%20%20%20%20%20String%20commonJsPattern%20%3D%20pattern.replaceAll(%22%5C%5C*%22%2C%20%22js%2Fcommon.js%22)%3B%0A%20%20%20%20%20%20%20%20final%20String%20filePath%20%3D%20%22support%2Fhttp%2Fresources%2Fjs%2Fcommon.js%22%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20%E5%88%9B%E5%BB%BAfilter%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4%0A%20%20%20%20%20%20%20%20Filter%20filter%20%3D%20new%20Filter()%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20public%20void%20init(javax.servlet.FilterConfig%20filterConfig)%20throws%20ServletException%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20public%20void%20doFilter(ServletRequest%20request%2C%20ServletResponse%20response%2C%20FilterChain%20chain)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20throws%20IOException%2C%20ServletException%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20chain.doFilter(request%2C%20response)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E9%87%8D%E7%BD%AE%E7%BC%93%E5%86%B2%E5%8C%BA%EF%BC%8C%E5%93%8D%E5%BA%94%E5%A4%B4%E4%B8%8D%E4%BC%9A%E8%A2%AB%E9%87%8D%E7%BD%AE%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20response.resetBuffer()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E8%8E%B7%E5%8F%96common.js%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20String%20text%20%3D%20Utils.readFromResource(filePath)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20%E6%AD%A3%E5%88%99%E6%9B%BF%E6%8D%A2banner%2C%20%E9%99%A4%E5%8E%BB%E5%BA%95%E9%83%A8%E7%9A%84%E5%B9%BF%E5%91%8A%E4%BF%A1%E6%81%AF%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%20%3D%20text.replaceAll(%22%3Ca.*%3Fbanner%5C%22%3E%3C%2Fa%3E%3Cbr%2F%3E%22%2C%20%22%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20text%20%3D%20text.replaceAll(%22powered.*%3Fshrek.wang%3C%2Fa%3E%22%2C%20%22%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20response.getWriter().write(text)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%40Override%0A%20%20%20%20%20%20%20%20%20%20%20%20public%20void%20destroy()%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20FilterRegistrationBean%20registrationBean%20%3D%20new%20FilterRegistrationBean()%3B%0A%20%20%20%20%20%20%20%20registrationBean.setFilter(filter)%3B%0A%20%20%20%20%20%20%20%20registrationBean.addUrlPatterns(commonJsPattern)%3B%0A%20%20%20%20%20%20%20%20return%20registrationBean%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20JDBC%E6%93%8D%E4%BD%9C%E9%85%8D%E7%BD%AE%0A%20%20%20%20%20*%2F%0A%20%20%20%20%40Bean(name%20%3D%20%22dataOneTemplate%22)%0A%20%20%20%20public%20JdbcTemplate%20jdbcTemplate%20(%40Autowired%20DruidDataSource%20dataSource)%7B%0A%20%20%20%20%20%20%20%20return%20new%20JdbcTemplate(dataSource)%20%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F**%0A%20%20%20%20%20*%20%E9%85%8D%E7%BD%AE%20Druid%20%E7%9B%91%E6%8E%A7%E7%95%8C%E9%9D%A2%0A%20%20%20%20%20*%2F%0A%20%20%20%20%40Bean%0A%20%20%20%20public%20ServletRegistrationBean%20statViewServlet()%7B%0A%20%20%20%20%20%20%20%20ServletRegistrationBean%20srb%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20new%20ServletRegistrationBean(new%20StatViewServlet()%2C%22%2Fdruid%2F*%22)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E8%AE%BE%E7%BD%AE%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7%0A%20%20%20%20%20%20%20%20srb.addInitParameter(%22loginUsername%22%2C%22root%22)%3B%0A%20%20%20%20%20%20%20%20srb.addInitParameter(%22loginPassword%22%2C%22root%22)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E6%98%AF%E5%90%A6%E5%8F%AF%E4%BB%A5%E9%87%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%0A%20%20%20%20%20%20%20%20srb.addInitParameter(%22resetEnable%22%2C%22false%22)%3B%0A%20%20%20%20%20%20%20%20return%20srb%3B%0A%20%20%20%20%7D%0A%20%20%20%20%40Bean%0A%20%20%20%20public%20FilterRegistrationBean%20statFilter()%7B%0A%20%20%20%20%20%20%20%20%2F%2F%E5%88%9B%E5%BB%BA%E8%BF%87%E6%BB%A4%E5%99%A8%0A%20%20%20%20%20%20%20%20FilterRegistrationBean%20frb%20%3D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20new%20FilterRegistrationBean(new%20WebStatFilter())%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E8%AE%BE%E7%BD%AE%E8%BF%87%E6%BB%A4%E5%99%A8%E8%BF%87%E6%BB%A4%E8%B7%AF%E5%BE%84%0A%20%20%20%20%20%20%20%20frb.addUrlPatterns(%22%2F*%22)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%E5%BF%BD%E7%95%A5%E8%BF%87%E6%BB%A4%E7%9A%84%E5%BD%A2%E5%BC%8F%0A%20%20%20%20%20%20%20%20frb.addInitParameter(%22exclusions%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22*.js%2C*.gif%2C*.jpg%2C*.png%2C*.css%2C*.ico%2C%2Fdruid%2F*%22)%3B%0A%20%20%20%20%20%20%20%20return%20frb%3B%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%E6%8F%90%E4%BE%9B%E4%B8%80%E4%B8%8B%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84%0A!%5Bd804c21f2d4ccf97cb3fcbc274385fab.png%5D(en-resource%3A%2F%2Fdatabase%2F853%3A1)%0A%E5%88%B0%E6%AD%A4%EF%BC%8C%E9%85%8D%E7%BD%AE%E5%B7%B2%E7%BB%8F%E5%AE%8C%E6%88%90%E4%BA%86%E6%8E%A5%E4%B8%8B%E6%9D%A5%E6%9F%A5%E7%9C%8B%E9%A1%B5%E9%9D%A2%EF%BC%8C%E8%AE%BF%E9%97%AEhttp%3A%2F%2Flocalhost%3A8443%2Fdruid%2Flogin%EF%BC%8C%E7%99%BB%E5%BD%95%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E5%9C%A8%E4%BB%A3%E7%A0%81%E9%87%8C%E9%9D%A2%E5%86%99%E6%AD%BB%E7%9A%84%EF%BC%9Ausername%3Arootpassword%3Aroot%0A!%5Be45a30c261fab1b65b5b87e2b43741ae.png%5D(en-resource%3A%2F%2Fdatabase%2F847%3A1)%0A!%5Ba13e9998ec4c05812dfdc2e5c622b548.png%5D(en-resource%3A%2F%2Fdatabase%2F849%3A1)%0A!%5B01e80bb08ef91300a8c7388fa50c52d7.png%5D(en-resource%3A%2F%2Fdatabase%2F851%3A1)%0A%5B%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE1%5D(https%3A%2F%2Fblog.csdn.net%2Fqq_41950855%2Farticle%2Fdetails%2F109578507)%0A%5B%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE2%5D(https%3A%2F%2Fblog.csdn.net%2Fgnail_oug%2Farticle%2Fdetails%2F80172239)%0A%0A%23%20%E4%BA%8C%E3%80%81Spring%20%E7%9B%91%E6%8E%A7%0A%0A%E9%BB%98%E8%AE%A4%E6%83%85%E5%86%B5%E4%B8%8B%E7%9B%91%E6%8E%A7%E6%8E%A7%E5%88%B6%E5%8F%B0%E4%B8%AD%E2%80%9CSpring%E7%9B%91%E6%8E%A7%E2%80%9D%E5%AD%90%E9%A1%B5%E9%9D%A2%E5%86%85%E5%AE%B9%E6%98%AF%E7%A9%BA%E7%9A%84%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E7%B1%BB%E4%BC%BC%E5%A6%82%E4%B8%8B%E7%9A%84%E9%85%8D%E7%BD%AE%EF%BC%8C%E5%88%A9%E7%94%A8%C2%A0aop%C2%A0%E5%AF%B9%E5%90%84%E4%B8%AA%E5%86%85%E5%AE%B9%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4%E3%80%81jdbc%C2%A0%E6%95%B0%E8%BF%9B%E8%A1%8C%E8%AE%B0%E5%BD%95%E3%80%82%5B%E5%8E%9F%E6%96%87%5D(https%3A%2F%2Fwww.hangge.com%2Fblog%2Fcache%2Fdetail_2876.html)%0A%23%23%201.%20Spring%20%E7%9B%91%E6%8E%A7%E9%85%8D%E7%BD%AE%0A%E5%9C%A8application.%20properties%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E9%85%8D%E7%BD%AE%0A%60%60%60%0A%23%20Spring%20%E7%9B%91%E6%8E%A7%E9%85%8D%E7%BD%AE%EF%BC%88%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AAAOP%E5%88%87%E5%85%A5%E7%82%B9%E4%BD%BF%E7%94%A8%E8%8B%B1%E6%96%87%E9%80%97%E5%8F%B7%E5%88%86%E9%9A%94%EF%BC%89%0Aspring.datasource.druid.aop-patterns%3Dcom.psbc.zcy.demo.dao.*%0A%60%60%60%0A%23%23%202.%E4%BF%AE%E6%94%B9%C2%A0pom.xml%C2%A0%E6%96%87%E4%BB%B6%0A%0A%E5%90%8C%E6%97%B6%E8%AE%B0%E5%BE%97%E4%BF%AE%E6%94%B9%C2%A0pom.xml%C2%A0%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B7%BB%E5%8A%A0%C2%A0spring-boot-starter-aop%C2%A0%E4%BE%9D%E8%B5%96%E4%BB%A5%E6%8F%90%E4%BE%9B%C2%A0AOP%C2%A0%E6%94%AF%E6%8C%81%EF%BC%9A%0A%60%60%60html%0A%3C!--%20spring%E7%9B%91%E6%8E%A7%E6%89%80%E7%94%A8%E4%BE%9D%E8%B5%96%E6%B7%BB%E5%8A%A0%20spring-boot-starter-aop%20%E4%BE%9D%E8%B5%96%E4%BB%A5%E6%8F%90%E4%BE%9B%20AOP%20%E6%94%AF%E6%8C%81start%20--%3E%0A%20%20%20%20%20%20%20%20%3Cdependency%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CgroupId%3Eorg.springframework.boot%3C%2FgroupId%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CartifactId%3Espring-boot-starter-aop%3C%2FartifactId%3E%0A%20%20%20%20%20%20%20%20%3C%2Fdependency%3E%0A%20%20%20%20%20%20%20%20%3C!--%20end%20--%3E%0A%60%60%60%0A%23%23%203.%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE%0A%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE%E5%90%8E%E6%88%91%E4%BB%AC%E9%9A%8F%E4%BE%BF%E8%AF%B7%E6%B1%82%E5%87%A0%E4%B8%AA%C2%A0contoller%C2%A0%E6%8E%A5%E5%8F%A3%EF%BC%8C%E7%84%B6%E5%90%8E%E8%AE%BF%E9%97%AE%E2%80%9CSpring%E7%9B%91%E6%8E%A7%E2%80%9D%E5%8D%B3%E5%8F%AF%E6%9F%A5%E7%9C%8B%E6%96%B9%E6%B3%95%E6%89%A7%E8%A1%8C%E7%9A%84%E6%AC%A1%E6%95%B0%E3%80%81%E6%89%A7%E8%A1%8C%E7%9A%84%E6%97%B6%E9%97%B4%E7%AD%89%E4%BF%A1%E6%81%AF%E3%80%82%0A!%5B7ff4cca08c8cb8af8eb28089b870dc11.png%5D(en-resource%3A%2F%2Fdatabase%2F855%3A1)%0A%23%20%E4%B8%89%E3%80%81%E8%8E%B7%E5%8F%96%20Druid%20%E7%9A%84%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%0A%0ADruid%C2%A0%E7%9A%84%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%BC%80%E5%90%AF%C2%A0StatFilter%C2%A0%E5%90%8E%E9%80%9A%E8%BF%87%C2%A0DruidStatManagerFacade%C2%A0%E8%BF%9B%E8%A1%8C%E8%8E%B7%E5%8F%96%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%88%B0%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E4%B9%8B%E5%90%8E%E6%88%91%E4%BB%AC%E4%BE%BF%E5%8F%AF%E4%BB%A5%E5%B0%86%E5%85%B6%E6%9A%B4%E9%9C%B2%E7%BB%99%E6%88%91%E4%BB%AC%E8%87%AA%E5%B7%B1%E7%9A%84%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E8%BF%9B%E8%A1%8C%E4%BD%BF%E7%94%A8%E3%80%82Druid%C2%A0%E9%BB%98%E8%AE%A4%E7%9A%84%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E4%B9%9F%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AD%A4%E3%80%82%0A%0A%0A%EF%BC%881%EF%BC%89%E4%B8%8B%E9%9D%A2%E6%98%AF%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%BC%94%E7%A4%BA%E6%A0%B7%E4%BE%8B%EF%BC%8C%E5%9C%A8%C2%A0Spring%20Boot%C2%A0%E4%B8%AD%E9%80%9A%E8%BF%87%C2%A0HTTP%C2%A0%E6%8E%A5%E5%8F%A3%E5%B0%86%C2%A0Druid%C2%A0%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E4%BB%A5%C2%A0JSON%C2%A0%E7%9A%84%E5%BD%A2%E5%BC%8F%E6%9A%B4%E9%9C%B2%E5%87%BA%E5%8E%BB%EF%BC%88%E5%AE%9E%E9%99%85%E4%BD%BF%E7%94%A8%E4%B8%AD%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E6%A0%B9%E6%8D%AE%E5%AE%9E%E9%99%85%E7%9A%84%E9%9C%80%E8%A6%81%E8%87%AA%E7%94%B1%E5%9C%B0%E5%AF%B9%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E3%80%81%E6%9A%B4%E9%9C%B2%E6%96%B9%E5%BC%8F%E8%BF%9B%E8%A1%8C%E6%89%A9%E5%B1%95%EF%BC%89%E3%80%82%E5%9C%A8TeacherController%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%A6%82%E4%B8%8B%E6%8E%A5%E5%8F%A3%E3%80%82%0A%60%60%60java%0A%2F%2F%E8%8E%B7%E5%8F%96%20Druid%20%E7%9A%84%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%0A%20%20%20%20%40GetMapping(%22%2Fapi%2Fdruid-stat%22)%0A%20%20%20%20public%20Object%20druidStat()%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20DruidStatManagerFacade%23getDataSourceStatDataList%20%E8%AF%A5%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%0A%20%20%20%20%20%20%20%20%2F%2F%20%E9%99%A4%E6%AD%A4%E4%B9%8B%E5%A4%96%20DruidStatManagerFacade%20%E8%BF%98%E6%8F%90%E4%BE%9B%E4%BA%86%E4%B8%80%E4%BA%9B%E5%85%B6%E4%BB%96%E6%96%B9%E6%B3%95%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E6%8C%89%E9%9C%80%E9%80%89%E6%8B%A9%E4%BD%BF%E7%94%A8%E3%80%82%0A%20%20%20%20%20%20%20%20return%20DruidStatManagerFacade.getInstance().getDataSourceStatDataList()%3B%0A%20%20%20%20%7D%0A%60%60%60%0A%EF%BC%882%EF%BC%89%E6%88%91%E4%BB%AC%E9%80%9A%E8%BF%87api%C2%A0%2Fdruid-stat%C2%A0%E6%8E%A5%E5%8F%A3%E8%8E%B7%E5%8F%96%E5%88%B0%E5%A6%82%E4%B8%8B%E7%BB%9F%E8%AE%A1%E6%95%B0%E6%8D%AE%EF%BC%9A%EF%BC%88%E5%9C%A8%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%89%8D%E9%9C%80%E8%A6%81%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%93%8D%E4%BD%9C%E5%A6%82%2Fapi%2Fteacher%2Flist%EF%BC%8C%E8%BF%99%E6%A0%B7%E6%89%8D%E4%BC%9A%E8%83%BD%E8%8E%B7%E5%8F%96%E5%88%B0%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E4%BF%A1%E6%81%AF%EF%BC%8C%E4%B8%8D%E7%84%B6%E8%BF%94%E5%9B%9E%E5%80%BC%E4%B8%BA%5B%5D%EF%BC%89%0A!%5Be7ed780d3cc460753cc8e2170f612be6.png%5D(en-resource%3A%2F%2Fdatabase%2F857%3A1)%0A%0A%0A</center></span>
</div></body></html> 